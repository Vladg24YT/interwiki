(function(){function h(e,t){var r=document.getElementById("resizer-container"),a=document.createElement("iframe");return a.style.display="none",r.appendChild(a),e=e.replace(/^https?:/,""),t[0]!=="/"&&(t="/"+t),b(function(){var n=r.getBoundingClientRect().top,c=String(Math.floor(Math.random()*1e4));a.src=e+"/common--javascript/resize-iframe.html?"+c+"#"+n+t},250)}function b(e,t){var r=0;return function(){clearTimeout(r),r=setTimeout(e,t)}}var S="   query InterwikiQuery($url: URL!) {     page(url: $url) {       translations {         url       }       translationOf {         url         translations {           url         }       }     }   } ";function f(e,t,r,a){C(m(e.url+r),function(n){L(n,e,t,a)})}function m(e){if(e.indexOf(".wikidot.com")===-1)throw new Error("Crom requires wikidot.com branch URLs ("+e+")");return e.replace(/^https:/,"http")}function L(e,t,r,a){function n(o){return o.url}var c=null,i=[];i.extend(e.translations.map(n)),e.translationOf&&(c=e.translationOf.url,i.extend(e.translationOf.translations.map(n))),i.forEach(function(o){var s=o.indexOf(m(t.url))===0;if(!s){var l=Object.keys(r).find(function(u){return o.indexOf(m(r[u].url))===0});if(!l){console.warn("Interwiki: unknown branch "+o);return}a(o,r[l].name,l,c===o)}})}function C(e,t){var r=new XMLHttpRequest;r.open("POST","https://api.crom.avn.sh/graphql",!0),r.setRequestHeader("Content-Type","application/json"),r.addEventListener("readystatechange",function(){if(r.readyState===XMLHttpRequest.DONE)try{if(r.status===200){var a=JSON.parse(r.responseText);if(a.errors&&a.errors.length>0)throw new Error(a.errors);t(a.data.page)}else throw new Error(r.status)}catch(n){console.error("Interwiki: lookup failed for "+e),console.error(n)}}),r.send(JSON.stringify({query:S,variables:{url:e}}))}var E=f;function y(e,t,r,a){var n=e[t]||{},c=document.getElementsByClassName("side-block")[0];c.style.display="none";var i=document.querySelector(".heading p");i.innerText=n.head,i.addEventListener("click",function(){location.reload()}),i.title="Click to refresh (Last refresh\uFF1A"+new Date().toLocaleString()+")",E(n,e,r,function(o,s,l,u){I(o,s,l,u),a()})}function I(e,t,r,a){var n=document.getElementsByClassName("side-block")[0],c=Array.prototype.slice.call(n.getElementsByClassName("menu-item"));n.style.display="";var i=document.createElement("div");i.classList.add("menu-item"),a&&i.classList.add("original"),i.setAttribute("name",r);var o=document.createElement("img");o.setAttribute("src","//scp-wiki.wdfiles.com/local--files/nav:side/default.png"),o.setAttribute("alt","default.png"),o.classList.add("image"),i.appendChild(o);var s=document.createElement("a");s.setAttribute("href",e),s.setAttribute("target","_parent"),s.innerText=t,i.appendChild(s),n.appendChild(i),c.some(function(l){if(l.getAttribute("name")>r)return n.insertBefore(i,l),!0})}function g(e,t){return function(a){var n=d(a,"priority"),c=Number(n);if(isNaN(c)){console.error("Interwiki: rejected style with priority"+n);return}var i=d(a,"theme");i&&p(c,O(e,i));var o=d(a,"css");o&&N(c,o),(i||o)&&setTimeout(t,250)}}function N(e,t){var r=Array.prototype.slice.call(document.head.querySelectorAll("style.custom-style"));if(!r.some(w(e,t))){var a=document.createElement("style");a.innerText=t,k(e,a)}}function p(e,t){var r=Array.prototype.slice.call(document.head.querySelectorAll("link.custom-style"));if(!r.some(w(e,t))){var a=document.createElement("link");a.rel="stylesheet",a.href=t,k(e,a)}}function k(e,t){t.classList.add("custom-style"),t.dataset.priority=e;var r=Array.prototype.slice.call(document.head.querySelectorAll("link.custom-style, style.custom-style")),a=t.tagName,n=r.some(function(c){var i=Number(c.dataset.priority),o=c.tagName;if(e>i)return!1;if(i===e){if(o==="LINK"&&a==="STYLE")return!1;o===a&&console.error("Interwiki: encountered two "+(o==="LINK"?"themes":"CSS styles")+" with the same priority ("+i+") - result may not be as expected")}return document.head.insertBefore(t,c),!0});n||document.head.appendChild(t)}function w(e,t){var r=function(a){return Number(a.getAttribute("data-priority"))!==e?!1:a.tagName==="LINK"?a.getAttribute("href")===t:a.tagName==="STYLE"?a.innerText===t:!1};return r}function O(e,t){if(t.indexOf("http")===0||t.indexOf("//")===0)return t;if(!e)return console.error("Interwiki: could not resolve relative fullname ("+t+") for unconfigured site. Consider using a full URL instead."),"";if(t.indexOf("/")===-1)return e+"/local--code/"+t+"/1";var r=t.split("/");return r.length>=3&&r[1]==="code"?e+"/local--code/"+r[0]+"/"+r[2]:(console.error("Interwiki: unknown theme location:"+t),"")}var v={cn:{name:"\u4E2D\u6587",head:"\u5176\u4ED6\u8BED\u8A00",url:"https://scp-wiki-cn.wikidot.com/",id:"530812",category:""},cs:{name:"\u010Cesky",head:"V jin\xFDch jazyc\xEDch",url:"https://scp-cs.wikidot.com/",id:"2060442",category:""},en:{name:"English",head:"In other languages",url:"https://scp-wiki.wikidot.com/",id:"66711",category:""},fr:{name:"Fran\xE7ais",head:"Dans d\u2019autres langues",url:"https://fondationscp.wikidot.com/",id:"464696",category:""},de:{name:"Deutsch",head:"In anderen Sprachen",url:"https://scp-wiki-de.wikidot.com/",id:"1269857",category:""},int:{name:"International",head:"Languages",url:"https://scp-int.wikidot.com/",id:"1427610",category:""},it:{name:"Italiano",head:"In altre lingue",url:"https://fondazionescp.wikidot.com/",id:"530167",category:""},jp:{name:"\u65E5\u672C\u8A9E",head:"\u4ED6\u8A00\u8A9E\u7248",url:"https://scp-jp.wikidot.com/",id:"578002",category:""},ko:{name:"\uD55C\uAD6D\uC5B4",head:"\uB2E4\uB978 \uC5B8\uC5B4",url:"http://scpko.wikidot.com/",id:"486864",category:""},pl:{name:"Polski",head:"W innych j\u0119zykach",url:"http://scp-pl.wikidot.com/",id:"647733",category:""},ptbr:{name:"Portugu\xEAs",head:"Em outros idiomas",url:"https://scp-pt-br.wikidot.com/",id:"783633",category:""},ru:{name:"\u0420\u0443\u0441\u0441\u043A\u0438\u0439",head:"\u041D\u0430 \u0434\u0440\u0443\u0433\u0438\u0445 \u044F\u0437\u044B\u043A\u0430\u0445",url:"http://scp-ru.wikidot.com/",id:"169125",category:""},es:{name:"Espa\xF1ol",head:"En otros idiomas",url:"http://lafundacionscp.wikidot.com/",id:"560484",category:""},th:{name:"\u0E20\u0E32\u0E29\u0E32\u0E44\u0E17\u0E22",head:"\u0E20\u0E32\u0E29\u0E32\u0E2D\u0E37\u0E48\u0E19",url:"https://scp-th.wikidot.com/",id:"547203",category:""},ua:{name:"\u0423\u043A\u0440\u0430\u0457\u043D\u0441\u044C\u043A\u0430",head:"\u0406\u043D\u0448\u0438\u043C\u0438 \u043C\u043E\u0432\u0430\u043C\u0438",url:"https://scp-ukrainian.wikidot.com/",id:"1398197",category:""},"zh-tr":{name:"\u7E41\u9AD4\u4E2D\u6587",head:"\u5176\u4ED6\u8A9E\u8A00",url:"https://scp-zh-tr.wikidot.com/",id:"3947998",category:""},vn:{name:"Ti\u1EBFng Vi\u1EC7t",head:"Ng\xF4n ng\u1EEF",url:"https://scp-vn.wikidot.com/",id:"836589",category:""}};var x={cn:{name:"\u4E2D\u6587",head:"\u5176\u4ED6\u8BED\u8A00",url:"https://scp-wiki-cn.wikidot.com/",id:"530812",category:"wanderers:"},cs:{name:"\u010Ce\u0161tina",head:"V jin\xFDch jazyc\xEDch",url:"https://wanderers-library-cs.wikidot.com/",id:"4600566",category:""},en:{name:"English",head:"Languages",url:"https://wanderers-library.wikidot.com/",id:"146034",category:""},jp:{name:"\u65E5\u672C\u8A9E",head:"\u4ED6\u8A00\u8A9E\u7248",url:"https://wanderers-library-jp.wikidot.com/",id:"4600658",category:""},ko:{name:"\uD55C\uAD6D\uC5B4",head:"\uB2E4\uB978 \uC5B8\uC5B4",url:"https://wanderers-library-ko.wikidot.com/",id:"621849",category:""},pl:{name:"Polski",head:"W innych j\u0119zykach",url:"https://wanderers-library-pl.wikidot.com/",id:"4593099",category:""}};addEventListener("DOMContentLoaded",function(){var e=d(location.search,"community"),t=d(location.search,"pagename"),r=d(location.search,"lang"),a=d(location.search,"preventWikidotBaseStyle");B(e,t,r,a),window.isInterwikiFrame=!0});function d(e,t){e.indexOf("?")===0&&(e=e.substring(1));var r=e.split("&");r.reverse();var a=r.find(function(n){return n.indexOf(t+"=")===0});return a==null?"":decodeURIComponent(a.substring(t.length+1))}function T(){Array.prototype.slice.call(parent).forEach(function(e){try{e.isStyleFrame&&window.requestStyleChange(e.location.search)}catch(t){if(!(t instanceof DOMException))throw t}})}function B(e,t,r,a){t=t.replace(/^_default:/,"");var n={wl:x,scp:v}[e]||{},c=n[r]||{},i=document.referrer,o=location.href.replace(/^.*\//,"/"),s=h(i,o);window.requestStyleChange=g(c.url||"",s),a!=="true"&&p(-1,"//d3g0gp89917ko0.cloudfront.net/v--3e3a6f7dbcc9/common--theme/base/css/style.css"),T(),y(n,r,t,s)}})();
//# sourceMappingURL=interwiki.js.map
